name: CI

on: [push]

jobs:

  build: &defaults
    runs-on: ubuntu-latest
    steps:
    - &checkout
      uses: actions/checkout@v1
    - &setup-node
      name: Use Node.js 12
      uses: actions/setup-node@v1
      with:
        node-version: 12
    - &install-dependencies
      name: Install Dependencies
      run: npm ci
    - name: Run Build
      run: npm run build

  lint:
    <<: *defaults
    steps:
    - *checkout
    - *setup-node
    - *install-dependencies
    - name: Run Lint
      run: npm run check-lint

  test:
    <<: *defaults
    steps:
    - *checkout
    - *setup-node
    - *install-dependencies
    - name: Run Tests
      run: npm run test

  typecheck:
    <<: *defaults
    steps:
    - *checkout
    - *setup-node
    - *install-dependencies
    - name: Type Check
      run: npm run type
